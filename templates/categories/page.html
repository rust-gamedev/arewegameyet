{% extends "master.html" %}
{% import "macros.html" as macros %}
{% import "categories/macros.html" as category_macros %}

{#
    a collection of crates, used to be "categories".  However, with Zola, categories implies
    a taxonomy, which isn't completely accurate since it's more like pages with external data loading.
#}

{% block seo %}
    <title>{{ page.title }} | {{ config.title }}</title>

    <meta property="og:title" content="{{ page.title }}">
    <meta property="og:url" content="{{ page.permalink }}">
    <meta property="og:description" content="{{ page.description }}">
    <link rel="canonical" href="{{ page.permalink }}">
{% endblock seo %}

{% block head %}
{# unfortunately we need some page-specific css here #}
<style type="text/css">
    .hidden.menu {
        display: none;
    }

    .masthead.segment {
        min-height: 70px;
        padding: 1em 0em;
    }

    .masthead .logo.item img {
        margin-right: 1em;
    }

    .masthead .ui.menu .ui.button {
        margin-left: 0.5em;
    }

    .masthead h1.ui.header {
        margin-top: 3em;
        margin-bottom: 0em;
        font-size: 4em;
        font-weight: normal;
    }

    .masthead h2 {
        font-size: 1.7em;
        font-weight: normal;
    }

    .ui.vertical.stripe {
        padding: 8em 0em;
    }

    .ui.vertical.stripe h3 {
        font-size: 2em;
    }

    .ui.vertical.stripe .button+h3,
    .ui.vertical.stripe p+h3 {
        margin-top: 3em;
    }

    .ui.vertical.stripe .floated.image {
        clear: both;
    }

    .ui.vertical.stripe p {
        font-size: 1.33em;
    }

    .ui.vertical.stripe .horizontal.divider {
        margin: 3em 0em;
    }

    .quote.stripe.segment {
        padding: 0em;
    }

    .quote.stripe.segment .grid .column {
        padding-top: 5em;
        padding-bottom: 5em;
    }

    .footer.segment {
        padding: 5em 0em;
    }

    .secondary.pointing.menu .toc.item {
        display: none;
    }

    @media only screen and (max-width: 700px) {
        .ui.fixed.menu {
            display: none !important;
        }

        .secondary.pointing.menu .item,
        .secondary.pointing.menu .menu {
            display: none;
        }

        .secondary.pointing.menu .toc.item {
            display: block;
        }

        .masthead.segment {
            min-height: 350px;
        }

        .masthead h1.ui.header {
            font-size: 2em;
            margin-top: 1.5em;
        }

        .masthead h2 {
            margin-top: 0.5em;
            font-size: 1.5em;
        }
    }
</style>
{% endblock %}

{% block content %} 

{{ macros::header(full=false) }} 

{# Heading #}
<div class="ui vertical stripe">
    <h2 class="ui center aligned icon header">
        <i class="circular game icon"></i>
        {{page.title}}
    </h2>
    <div class="ui text container">
        <p>{{page.description}}</p>
    </div>
</div>

{# list all content #}

<h4 class="ui horizontal divider header">
    <a href="#crates" id="crates">
        <i class="list icon big"></i>
        Crates
    </a>
</h4>

<div class="ui vertical stripe">
    <div class="ui grid">
        <div class="row">
            <div class="ten wide centered column">
                {# display each box of content #}
                {% set config = load_data(path = "content/" ~ page.path ~ "data.toml", format="toml") %}

                {# dynamic data loaded using the crates.io API #}
                {% if config.crates %}
                    {% for crate in config.crates %}
                        {{ category_macros::info(crate=crate) }}
                    {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>
</div>

<h4 class="ui horizontal divider header">
    <a href="#contribute" id="contribute">
        <i class="chat icon big"></i>
        Contribute
    </a>
</h4>

<div class="ui vertical stripe">
    <div class="ui text container">
        <p>Do you know about a missing crate? Did you launch a new crate?</p>
        <p>
            Please create
            <a href="https://github.com/doppioslash/arewegameyet/issues/new?title=Add+crate:+CRATE&amp;body=Please+add+crate+to+category:+2drendering">an issue</a>
            or a pull request.
        </p>
        <p>Looking for a library you can't find here? Try asking on the <a href="/#chat">chat</a>.</p>
    </div>
</div>
{% endblock content %}